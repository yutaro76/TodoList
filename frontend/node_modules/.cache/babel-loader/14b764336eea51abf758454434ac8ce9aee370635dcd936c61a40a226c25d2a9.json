{"ast":null,"code":"import React from'react';import{useState,StrictMode,useEffect}from\"react\";import{createRoot}from'react-dom/client';import\"./index.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const initialTodos=[{value:'TODO #5',id:4,checked:false,removed:false},{value:'TODO #4',id:3,checked:true,removed:false},{value:'TODO #3',id:2,checked:false,removed:true},{value:'TODO #2',id:1,checked:true,removed:true},{value:'TODO #1',id:0,checked:false,removed:false}];// =====================================\nexport const App=()=>{const[text,setText]=useState(()=>{const storedText=localStorage.getItem('text');return storedText?JSON.parse(storedText):'';});useEffect(()=>{localStorage.setItem('text',JSON.stringify(text));},[text]);const[todos,setTodos]=useState(()=>{;const storedTodos=localStorage.getItem('todos');return storedTodos?JSON.parse(storedTodos):initialTodos;});useEffect(()=>{localStorage.setItem('todos',JSON.stringify(todos));},[todos]);const[filter,setFilter]=useState(()=>{const storedFilter=localStorage.getItem('filter');return storedFilter?JSON.parse(storedFilter):'all';});useEffect(()=>{localStorage.setItem('filter',JSON.stringify(filter));},[filter]);const handleChange=e=>{setText(e.target.value);};const handleSubmit=()=>{if(!text)return;const newTodo={value:text,id:new Date().getTime(),checked:false,removed:false};setTodos(todos=>[newTodo,...todos]);setText('');};const handleTodo=(id,key,value)=>{setTodos(todos=>{const newTodos=todos.map(todo=>{if(todo.id===id){return{...todo,[key]:value};}else{return todo;}});return newTodos;});};const handleSort=filter=>{setFilter(filter);};const handleEmpty=()=>{setTodos(todos=>todos.filter(todo=>!todo.removed));};const filteredTodos=todos.filter(todo=>{switch(filter){case'all':return!todo.removed;case'checked':return todo.checked&&!todo.removed;case'unchecked':return!todo.checked&&!todo.removed;case'removed':return todo.removed;default:return todo;}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"select\",{value:filter,onChange:e=>handleSort(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u3059\\u3079\\u3066\\u306E\\u30BF\\u30B9\\u30AF\"}),/*#__PURE__*/_jsx(\"option\",{value:\"checked\",children:\"\\u5B8C\\u4E86\\u3057\\u305F\\u30BF\\u30B9\\u30AF\"}),/*#__PURE__*/_jsx(\"option\",{value:\"unchecked\",children:\"\\u73FE\\u5728\\u306E\\u30BF\\u30B9\\u30AF\"}),/*#__PURE__*/_jsx(\"option\",{value:\"removed\",children:\"\\u3054\\u307F\\u7BB1\"})]}),filter==='removed'?/*#__PURE__*/_jsx(\"button\",{onClick:handleEmpty,disabled:todos.filter(todo=>todo.removed).length===0,children:\"\\u3054\\u307F\\u7BB1\\u3092\\u7A7A\\u306B\\u3059\\u308B\"}):filter!=='checked'&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleSubmit();},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:text,onChange:e=>handleChange(e)}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"\\u8FFD\\u52A0\",onSubmit:handleSubmit})]}),/*#__PURE__*/_jsx(\"ul\",{children:filteredTodos.map(todo=>{return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",disabled:todo.removed,checked:todo.checked,onChange:()=>handleTodo(todo.id,'checked',!todo.checked)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:todo.checked||todo.removed,value:todo.value,onChange:e=>handleTodo(todo.id,'value',e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleTodo(todo.id,'removed',!todo.removed),children:todo.removed?'復元':'削除'})]},todo.id);})})]});};const root=createRoot(document.getElementById('root'));root.render(/*#__PURE__*/_jsx(StrictMode,{children:/*#__PURE__*/_jsx(App,{})}));","map":{"version":3,"names":["React","useState","StrictMode","useEffect","createRoot","jsx","_jsx","jsxs","_jsxs","initialTodos","value","id","checked","removed","App","text","setText","storedText","localStorage","getItem","JSON","parse","setItem","stringify","todos","setTodos","storedTodos","filter","setFilter","storedFilter","handleChange","e","target","handleSubmit","newTodo","Date","getTime","handleTodo","key","newTodos","map","todo","handleSort","handleEmpty","filteredTodos","children","onChange","onClick","disabled","length","onSubmit","preventDefault","type","root","document","getElementById","render"],"sources":["/Applications/js_project/todo_list/src/index.tsx"],"sourcesContent":["import React from 'react';\nimport { useState, StrictMode, useEffect } from \"react\";\nimport { createRoot } from 'react-dom/client';\nimport \"./index.css\";\n\nconst initialTodos: Todo[] = [\n  {\n    value: 'TODO #5',\n    id: 4,\n    checked: false,\n    removed: false,\n  },\n  {\n    value: 'TODO #4',\n    id: 3,\n    checked: true,\n    removed: false,\n  },\n  {\n    value: 'TODO #3',\n    id: 2,\n    checked: false,\n    removed: true,\n  },\n  {\n    value: 'TODO #2',\n    id: 1,\n    checked: true,\n    removed: true,\n  },\n  {\n    value: 'TODO #1',\n    id: 0,\n    checked: false,\n    removed: false,\n  },\n];\n// =====================================\n\ntype Todo = {\n  value: string;\n  readonly id: number;\n  checked: boolean;\n  removed: boolean;\n};\n\ntype Filter = 'all' | 'checked' | 'unchecked' | 'removed';\n\nexport const App = () => {\n\n  const [text, setText] = useState(() => {\n    const storedText = localStorage.getItem('text');\n    return storedText ? JSON.parse(storedText) : '';\n  });\n  \n  useEffect(() => {\n    localStorage.setItem('text', JSON.stringify(text));\n  }, [text]);\n\n  const [todos, setTodos] = useState<Todo[]>(() => {;\n    const storedTodos = localStorage.getItem('todos');\n    return storedTodos ? JSON.parse(storedTodos) : initialTodos;\n  });\n  \n  useEffect(() => {\n    localStorage.setItem('todos', JSON.stringify(todos));\n  }, [todos]);\n\n  const [filter, setFilter] = useState<Filter>(() => {\n    const storedFilter = localStorage.getItem('filter');\n    return storedFilter ? (JSON.parse(storedFilter) as Filter) : 'all';\n  });\n\n  useEffect(() => {\n    localStorage.setItem('filter', JSON.stringify(filter));\n  }, [filter]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setText(e.target.value);\n  };\n\n  const handleSubmit = () => {\n    if (!text) return;\n\n    const newTodo: Todo = {\n      value: text,\n      id: new Date().getTime(),\n      checked: false,\n      removed: false,\n    };\n\n    setTodos((todos) => [newTodo, ...todos]);\n    setText('');\n  };\n  \n  const handleTodo = <K extends keyof Todo, V extends Todo[K]>(\n    id: number,\n    key: K,\n    value: V\n  ) => {\n    setTodos((todos) => {\n      const newTodos = todos.map((todo) => {\n        if (todo.id === id) {\n          return { ...todo, [key]: value };\n        } else {\n          return todo;\n        }\n      });\n\n      return newTodos;\n    });\n  };\n\n  const handleSort = (filter: Filter) => {\n    setFilter(filter);\n  };\n\n  const handleEmpty = () => {\n    setTodos((todos) => todos.filter((todo) => !todo.removed));\n  };\n\n  const filteredTodos = todos.filter((todo) => {\n    switch (filter) {\n      case 'all':\n        return !todo.removed;\n      case 'checked':\n        return todo.checked && !todo.removed;\n      case 'unchecked':\n        return !todo.checked && !todo.removed;\n      case 'removed':\n        return todo.removed;\n      default:\n        return todo;\n    }\n  });\n\n  return (\n    <div>\n      <select\n        value={filter}\n        onChange={(e) => handleSort(e.target.value as Filter)}\n      >\n        <option value=\"all\">すべてのタスク</option>\n        <option value=\"checked\">完了したタスク</option>\n        <option value=\"unchecked\">現在のタスク</option>\n        <option value=\"removed\">ごみ箱</option>\n      </select>\n      {filter === 'removed' ? (\n        <button\n          onClick={handleEmpty}\n          disabled={todos.filter((todo) => todo.removed).length === 0}\n        >\n          ごみ箱を空にする\n        </button>\n      ) : (\n        filter !== 'checked' && (\n          <form\n            onSubmit={(e) => {\n              e.preventDefault();\n              handleSubmit();\n            }}\n          >\n            <input type=\"text\" value={text} onChange={(e) => handleChange(e)} />\n            <input type=\"submit\" value=\"追加\" onSubmit={handleSubmit} />\n          </form>\n        )\n      )}\n      <ul>\n        {filteredTodos.map((todo) => {\n          return (\n            <li key={todo.id}>\n              <input\n                type=\"checkbox\"\n                disabled={todo.removed}\n                checked={todo.checked}\n                onChange={() => handleTodo(todo.id, 'checked', !todo.checked)}\n              />\n              <input\n                type=\"text\"\n                disabled={todo.checked || todo.removed}\n                value={todo.value}\n                onChange={(e) => handleTodo(todo.id, 'value', e.target.value)}\n              />\n              <button onClick={() => handleTodo(todo.id, 'removed', !todo.removed)}>\n                {todo.removed ? '復元' : '削除'}\n              </button>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nconst root = createRoot(document.getElementById('root') as Element);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}