{"ast":null,"code":"import React from'react';import{useState,StrictMode}from\"react\";import{createRoot}from'react-dom/client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const initialTodos=[{value:'TODO #5',id:4,checked:false,removed:false},{value:'TODO #4',id:3,checked:true,removed:false},{value:'TODO #3',id:2,checked:false,removed:true},{value:'TODO #2',id:1,checked:true,removed:true},{value:'TODO #1',id:0,checked:false,removed:false}];// =====================================\nexport const App=()=>{const[text,setText]=useState('');const[todos,setTodos]=useState(initialTodos);const[filter,setFilter]=useState('all');const handleChange=e=>{setText(e.target.value);};const handleSubmit=()=>{if(!text)return;const newTodo={value:text,id:new Date().getTime(),checked:false,removed:false};setTodos(todos=>[newTodo,...todos]);setText('');};const handleTodo=(id,key,value)=>{setTodos(todos=>{const newTodos=todos.map(todo=>{if(todo.id===id){return{...todo,[key]:value};}else{return todo;}});return newTodos;});};const handleSort=filter=>{setFilter(filter);};const handleEmpty=()=>{setTodos(todos=>todos.filter(todo=>!todo.removed));};const filteredTodos=todos.filter(todo=>{switch(filter){case'all':return!todo.removed;case'checked':return todo.checked&&!todo.removed;case'unchecked':return!todo.checked&&!todo.removed;case'removed':return todo.removed;default:return todo;}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"select\",{defaultValue:\"all\",onChange:e=>handleSort(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u3059\\u3079\\u3066\\u306E\\u30BF\\u30B9\\u30AF\"}),/*#__PURE__*/_jsx(\"option\",{value:\"checked\",children:\"\\u5B8C\\u4E86\\u3057\\u305F\\u30BF\\u30B9\\u30AF\"}),/*#__PURE__*/_jsx(\"option\",{value:\"unchecked\",children:\"\\u73FE\\u5728\\u306E\\u30BF\\u30B9\\u30AF\"}),/*#__PURE__*/_jsx(\"option\",{value:\"removed\",children:\"\\u3054\\u307F\\u7BB1\"})]}),filter==='removed'?/*#__PURE__*/_jsx(\"button\",{onClick:handleEmpty,disabled:todos.filter(todo=>todo.removed).length===0,children:\"\\u3054\\u307F\\u7BB1\\u3092\\u7A7A\\u306B\\u3059\\u308B\"}):filter!=='checked'&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleSubmit();},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:text,onChange:e=>handleChange(e)}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"\\u8FFD\\u52A0\",onSubmit:handleSubmit})]}),/*#__PURE__*/_jsx(\"ul\",{children:filteredTodos.map(todo=>{return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",disabled:todo.removed,checked:todo.checked,onChange:()=>handleTodo(todo.id,'checked',!todo.checked)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:todo.checked||todo.removed,value:todo.value,onChange:e=>handleTodo(todo.id,'value',e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleTodo(todo.id,'removed',!todo.removed),children:todo.removed?'復元':'削除'})]},todo.id);})})]});};const root=createRoot(document.getElementById('root'));root.render(/*#__PURE__*/_jsx(StrictMode,{children:/*#__PURE__*/_jsx(App,{})}));","map":{"version":3,"names":["React","useState","StrictMode","createRoot","jsx","_jsx","jsxs","_jsxs","initialTodos","value","id","checked","removed","App","text","setText","todos","setTodos","filter","setFilter","handleChange","e","target","handleSubmit","newTodo","Date","getTime","handleTodo","key","newTodos","map","todo","handleSort","handleEmpty","filteredTodos","children","defaultValue","onChange","onClick","disabled","length","onSubmit","preventDefault","type","root","document","getElementById","render"],"sources":["/Applications/js_project/todo_list/src/index.tsx"],"sourcesContent":["import React from 'react';\nimport { useState, StrictMode } from \"react\";\nimport { createRoot } from 'react-dom/client';\n\nconst initialTodos: Todo[] = [\n  {\n    value: 'TODO #5',\n    id: 4,\n    checked: false,\n    removed: false,\n  },\n  {\n    value: 'TODO #4',\n    id: 3,\n    checked: true,\n    removed: false,\n  },\n  {\n    value: 'TODO #3',\n    id: 2,\n    checked: false,\n    removed: true,\n  },\n  {\n    value: 'TODO #2',\n    id: 1,\n    checked: true,\n    removed: true,\n  },\n  {\n    value: 'TODO #1',\n    id: 0,\n    checked: false,\n    removed: false,\n  },\n];\n// =====================================\n\ntype Todo = {\n  value: string;\n  readonly id: number;\n  checked: boolean;\n  removed: boolean;\n};\n\ntype Filter = 'all' | 'checked' | 'unchecked' | 'removed';\n\nexport const App = () => {\n  const [text, setText] = useState('');\n  const [todos, setTodos] = useState<Todo[]>(initialTodos);\n  const [filter, setFilter] = useState<Filter>('all');\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setText(e.target.value);\n  };\n\n  const handleSubmit = () => {\n    if (!text) return;\n\n    const newTodo: Todo = {\n      value: text,\n      id: new Date().getTime(),\n      checked: false,\n      removed: false,\n    };\n\n    setTodos((todos) => [newTodo, ...todos]);\n    setText('');\n  };\n  \n  const handleTodo = <K extends keyof Todo, V extends Todo[K]>(\n    id: number,\n    key: K,\n    value: V\n  ) => {\n    setTodos((todos) => {\n      const newTodos = todos.map((todo) => {\n        if (todo.id === id) {\n          return { ...todo, [key]: value };\n        } else {\n          return todo;\n        }\n      });\n\n      return newTodos;\n    });\n  };\n\n  const handleSort = (filter: Filter) => {\n    setFilter(filter);\n  };\n\n  const handleEmpty = () => {\n    setTodos((todos) => todos.filter((todo) => !todo.removed));\n  };\n\n  const filteredTodos = todos.filter((todo) => {\n    switch (filter) {\n      case 'all':\n        return !todo.removed;\n      case 'checked':\n        return todo.checked && !todo.removed;\n      case 'unchecked':\n        return !todo.checked && !todo.removed;\n      case 'removed':\n        return todo.removed;\n      default:\n        return todo;\n    }\n  });\n\n  return (\n    <div>\n      <select\n        defaultValue=\"all\"\n        onChange={(e) => handleSort(e.target.value as Filter)}\n      >\n        <option value=\"all\">すべてのタスク</option>\n        <option value=\"checked\">完了したタスク</option>\n        <option value=\"unchecked\">現在のタスク</option>\n        <option value=\"removed\">ごみ箱</option>\n      </select>\n      {filter === 'removed' ? (\n        <button\n          onClick={handleEmpty}\n          disabled={todos.filter((todo) => todo.removed).length === 0}\n        >\n          ごみ箱を空にする\n        </button>\n      ) : (\n        filter !== 'checked' && (\n          <form\n            onSubmit={(e) => {\n              e.preventDefault();\n              handleSubmit();\n            }}\n          >\n            <input type=\"text\" value={text} onChange={(e) => handleChange(e)} />\n            <input type=\"submit\" value=\"追加\" onSubmit={handleSubmit} />\n          </form>\n        )\n      )}\n      <ul>\n        {filteredTodos.map((todo) => {\n          return (\n            <li key={todo.id}>\n              <input\n                type=\"checkbox\"\n                disabled={todo.removed}\n                checked={todo.checked}\n                onChange={() => handleTodo(todo.id, 'checked', !todo.checked)}\n              />\n              <input\n                type=\"text\"\n                disabled={todo.checked || todo.removed}\n                value={todo.value}\n                onChange={(e) => handleTodo(todo.id, 'value', e.target.value)}\n              />\n              <button onClick={() => handleTodo(todo.id, 'removed', !todo.removed)}>\n                {todo.removed ? '復元' : '削除'}\n              </button>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nconst root = createRoot(document.getElementById('root') as Element);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}